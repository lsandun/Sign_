sequenceDiagram
    participant U as ğŸ‘¤ User
    participant F as ğŸŒ Flask App
    participant Y as ğŸ¤– YOLO Model
    participant O as ğŸ“– OCR Engine
    participant V as ğŸ” Verification
    participant D as ğŸ“ Dataset
    participant C as ğŸ“Š CSV Generator

    Note over U,C: ğŸ“‹ Signature Verification Process
    
    U->>+F: ğŸ“„ Upload signature sheet
    F->>F: ğŸ’¾ Save file to uploads/
    F->>+Y: ğŸ” Detect signatures & regcodes
    Y-->>-F: ğŸ“¦ Return bounding boxes
    
    Note over F: ğŸ”„ Processing each detected signature
    
    loop ğŸ” For each detected signature
        F->>+O: ğŸ”¤ Extract registration code
        O-->>-F: ğŸ¯ Return SEU/IS/20/XX/XXX
        
        alt âœ… Valid registration code
            F->>+D: ğŸ‘¤ Find student folder
            D-->>-F: ğŸ“š Return genuine signatures
            
            Note over F,V: ğŸ” Signature comparison process
            
            loop ğŸ”„ For each genuine signature
                F->>+V: ğŸ†š Compare signatures
                V-->>-F: ğŸ“Š Return similarity score
            end
            
            F->>F: ğŸ¯ Determine authenticity
            Note right of F: Based on similarity<br/>threshold analysis
            
        else âŒ Invalid registration code
            F->>F: â­ï¸ Skip signature
            Note right of F: Mark as invalid<br/>registration code
        end
    end
    
    Note over F,C: ğŸ“Š Results generation
    
    F->>+C: ğŸ“‹ Export results
    C-->>-F: âœ… CSV ready
    F-->>-U: ğŸ“‹ Display results page
    
    Note over U,F: ğŸ’¾ File download
    
    U->>+F: ğŸ“¥ Download CSV
    F-->>-U: ğŸ“„ Send CSV file

    %% Styling
    %%{init: {'theme':'base', 'themeVariables': { 'primaryColor': '#e3f2fd', 'primaryTextColor': '#1565c0', 'primaryBorderColor': '#1976d2', 'lineColor': '#42a5f5', 'secondaryColor': '#f3e5f5', 'tertiaryColor': '#fff3e0'}}}%%